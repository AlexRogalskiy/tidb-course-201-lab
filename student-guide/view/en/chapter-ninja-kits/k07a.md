# K7: Optimistic Transaction Lock
+ Environment: `Java SDK`
+ Sample code:
[Line 65, 82: DemoJdbcTxOptimisticLock.java](https://github.com/pingcap/tidb-course-201-lab/blob/master/scripts/DemoJdbcTxOptimisticLock.java)
+ Mini demo story:
  + In `optimistic mode`, two transactions update the same row at the same time might cause conflict
  + The script provides two options, run it to observe the difference results: 
    + `no-retry`: Transaction auto rolled back in front of `ErrorCode 9007` 
    + `retry`: Wait and retry the failed DML if you encounter `ErrorCode 9007` 
```8
~!@// 1. Got to working directory: tidb-course-201-lab/scripts@!~

~!@// 2. Connect to TiDB@!~

      ~!@// Connect to TiDB Cloud@!~
      $ ./connect-cloud.sh

      ~!@// Connect to local Playground@!~
      $ ./connect-4000.sh

~!@// 3. Call the demo script twice with no-retry and retry options@!~
$ ./09-demo-jdbc-tx-optimistic-01-show.sh ~!@cloud|local no-retry@!~
$ ./09-demo-jdbc-tx-optimistic-01-show.sh ~!@cloud|local retry@!~

```